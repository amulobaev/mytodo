@{
    ViewBag.Title = "Задачи";
}

@section head {
    <link rel="stylesheet" href="@Url.Content("~/Content/font-awesome.min.css")" />
}

<h2>Задачи</h2>

<div class="row">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                @*<th>#</th>*@
                <th>Наименование</th>
                <th>Текст</th>
                <th>Статус</th>
                <th>Срок создания</th>
                <th>Срок выполнения</th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody id="data-update"></tbody>
    </table>
</div>

@section scripts
{
    <script type="text/javascript">
        $(document).ready(function () {
            $.getJSON("/api/tasks", GetTasks);
        });

        function GetTasks(data) {
            var newRows = '';
            $.each(data, function (key, val) {
                newRows += "<tr>";
                newRows += "<td>" + val.Name + "</td><td>" + val.Text + "</td><td>" + val.Status +
                    "</td><td>" + val.Created + "</td><td>" + val.Deadline + "</td>";
                newRows += "<td><a href=\"#\" title=\"Удалить\"><i class=\"fa fa-times\"></i></a></td>";
                newRows += "<tr>";
            });
            $("#data-update").html(newRows);
        }
    </script>
}
